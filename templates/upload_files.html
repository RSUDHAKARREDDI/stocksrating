{% extends "layout.html" %}
{% block content %}

<style>
  /* Base Variables for a modern look */
  :root {
    --primary-color: #4a90e2;
    --danger-color: #ff4d4d;
    --bg-light: #f8f9fa;
    --border-color: #e0e0e0;
    --text-main: #333;
  }

  .center-wrap {
    width: 100%;
    display: flex;
    justify-content: center;
    padding: 40px 15px;
    background-color: var(--bg-light);
    min-height: 100vh;
  }

  .files-card {
    width: min(1000px, 98vw);
    background: #ffffff;
    border-radius: 16px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.08);
    padding: 30px;
    border: 1px solid var(--border-color);
  }

  .files-card h2 {
    margin-bottom: 25px;
    text-align: center;
    font-weight: 600;
    color: var(--text-main);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
  }

  /* Improved Upload Form */
  .upload-form {
    display: flex;
    gap: 12px;
    align-items: center;
    justify-content: center;
    margin-bottom: 30px;
    padding: 20px;
    background: #fdfdfd;
    border: 2px dashed #d1d9e6;
    border-radius: 12px;
  }

  .upload-form input[type="file"] {
    font-size: 14px;
    color: #555;
  }

  .btn-upload {
    background: var(--primary-color);
    color: white;
    border: none;
    padding: 8px 20px;
    border-radius: 8px;
    font-weight: 500;
    cursor: pointer;
    transition: transform 0.1s, background 0.2s;
  }

  .btn-upload:hover {
    background: #357abd;
    transform: translateY(-1px);
  }

  /* Modern Table Styling */
  .table-wrap {
    overflow: hidden;
    border: 1px solid var(--border-color);
    border-radius: 12px;
    background: white;
  }

  table.files-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 14px;
  }

  .files-table th {
    background: #f1f3f5;
    color: #495057;
    font-weight: 600;
    padding: 15px;
    text-align: left;
    border-bottom: 2px solid var(--border-color);
  }

  .files-table td {
    padding: 14px 15px;
    border-bottom: 1px solid #eee;
    color: #555;
  }

  .files-table tr:last-child td { border-bottom: none; }
  .files-table tr:hover td { background: #f8fbff; }

  /* Action Buttons */
  .btn-delete {
    background: #fff0f0;
    color: var(--danger-color);
    border: 1px solid #ffdada;
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 13px;
    transition: all 0.2s;
  }

  .btn-delete:hover {
    background: var(--danger-color);
    color: white;
  }

  .empty-state {
    text-align: center;
    color: #999;
    padding: 40px 0;
    font-style: italic;
  }
</style>

<div class="center-wrap">
  <div class="files-card">
    <h2>ðŸ“‚ Upload Manager</h2>

    <form method="post" enctype="multipart/form-data" class="upload-form">
      <input type="file" name="file">
      <button type="submit" class="btn-upload">Upload File</button>
    </form>

    {% if files %}
      <div class="table-wrap">
        <table class="files-table">
          <thead>
            <tr>
              <th>Folder</th>
              <th>Filename</th>
              <th>Last Modified</th>
              <th style="text-align: right;">Action</th>
            </tr>
          </thead>
          <tbody>
            {% for file in files %}
            <tr>
              <td style="color: #888;">/{{ file.folder }}</td>
              <td style="font-weight: 500; color: #2c3e50;">{{ file.name }}</td>
              <td>{{ file.last_modified }}</td>
              <td style="text-align: right;">
                <form action="{{ url_for('file_upload_bp.delete_file', filename=file.name) }}"
                      method="post"
                      style="display:inline;"
                      onsubmit="return confirm('Are you sure you want to delete this file?');">
                  <button type="submit" class="btn-delete">Delete</button>
                </form>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <div class="empty-state">
        <p>No files currently in the central uploads folder.</p>
      </div>
    {% endif %}
  </div>
</div>

{% endblock %}