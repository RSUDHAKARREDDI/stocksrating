/* base two-column + off-canvas */
.page-wrap{ display:flex; gap:18px; align-items:flex-start; position:relative; }

.filters{
  flex:0 0 280px; width:280px;
  background:#fff; border:1px solid #eee; border-radius:12px;
  box-shadow:0 4px 10px rgba(0,0,0,.06); padding:16px;
  position:sticky; top:16px; max-height:84vh; overflow:auto;
  transition: transform .25s ease, opacity .2s ease; will-change: transform;
}
.page-wrap.filters-offcanvas .filters{
  position:absolute; left:0; top:0;
  transform: translateX(calc(-100% - 18px));
  opacity:0; pointer-events:none; z-index:1000;
}
.page-wrap.filters-offcanvas .results{ flex:1 1 100%; }

.filters-handle{
  display:none; position:fixed; left:12px; top:88px; z-index:1100;
  padding:8px 10px; border:1px solid #ddd; background:#fff;
  border-radius:999px; box-shadow:0 4px 10px rgba(0,0,0,.10);
  cursor:pointer; font-size:13px;
}
.page-wrap.filters-offcanvas .filters-handle{
  display:inline-flex; align-items:center; gap:6px;
}

/* header/button */
.filters-header{ display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; }
.filters-toggle{ padding:6px 10px; border:1px solid #ddd; background:#f7f7f7; border-radius:8px; cursor:pointer; font-size:13px; }

/* inputs + layout */
.results{ flex:1 1 auto; min-width:0; background:#fff; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,.06); padding:20px; }
.filters h3 { margin:0 0 10px; font-size:18px; color:#333; }
.filters label { display:block; font-size:12px; color:#666; margin-top:10px; }
.filters input, .filters select { width:100%; padding:8px; border:1px solid #ddd; border-radius:8px; }
.filters select[multiple] { height:120px; }
.filters .btn-row { display:flex; gap:8px; margin-top:14px; }
.filters button { padding:8px 10px; border-radius:8px; border:1px solid #ddd; background:#f7f7f7; cursor:pointer; }
.row-flex { display:flex; gap:8px; } .col{ flex:1; }
.label-split{ display:flex; align-items:center; justify-content:space-between; }
.range-box{ display:flex; flex-direction:column; gap:6px; margin-top:10px; }
.hint{ color:#777; font-size:12px; }

/* table */
.table-wrap { position:relative; overflow:auto; max-height:80vh; border:1px solid #eee; border-radius:12px; }
table { width:100%; border-collapse:collapse; min-width:1400px; font-size:13px; line-height:1.3; }
thead th {
  position:sticky; top:0; z-index:1; background:#f7f7f7;
  padding:8px 10px; text-align:left; border-bottom:1px solid #e9e9e9;
  font-size:12.5px; letter-spacing:.02em; color:#444; cursor:pointer; user-select:none;
  box-shadow:0 1px 0 rgba(0,0,0,0.04);
}
tbody td { padding:8px 10px; border-bottom:1px solid #f2f2f2; color:#2c2c2c; }
tbody tr:nth-child(even) { background:#fafafa; }
tbody tr:hover { background:#eef6ff; }
tbody tr { cursor:pointer; }
th.num, td.num { text-align:right; font-variant-numeric:tabular-nums; font-family:ui-monospace, Menlo, Consolas, monospace; }
th.sort-asc::after{ content:" ▲"; font-size:11px; color:#777; }
th.sort-desc::after{ content:" ▼"; font-size:11px; color:#777; }

/* kv modal + colors */
.kv-table{ width:100%; border-collapse:collapse; }
.kv-table th,.kv-table td{ padding:8px 10px; border-bottom:1px solid #eee; vertical-align:top; }
.kv-table th{ width:28%; color:#555; text-align:left; background:#fafafa; font-weight:600; }
.bg-good{ background:#e7f7e9 !important; } .bg-bad{ background:#fdecec !important; }

.modal-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.45); display:none; align-items:center; justify-content:center; z-index:9999; }
.modal{ width:min(720px,92vw); max-height:80vh; overflow:auto; background:#fff; border-radius:14px; box-shadow:0 10px 30px rgba(0,0,0,.25); padding:18px; position:relative; }
.modal .close{ position:absolute; right:10px; top:10px; border:1px solid #ddd; background:#f7f7f7; border-radius:8px; padding:6px 10px; cursor:pointer; }
body.modal-open{ overflow:hidden; }
.modal-body{ max-height:60vh; overflow:auto; } .modal-actions{ display:flex; gap:8px; justify-content:flex-end; margin-top:12px; }

/* Prevent line breaks in headers and cells */
thead th, tbody td {
  white-space: nowrap;
  text-overflow: ellipsis;
}

/* Modern styling for the 52-week distance labels */
.dist-container {
  display: flex;
  flex-direction: column;
  font-size: 11px;
  line-height: 1.1;
  margin-top: 4px;
}
.dist-low { color: #2e7d32; } /* Green for distance from low */
.dist-high { color: #d32f2f; } /* Red for distance from high */

/* Refined table header */
thead th {
  background: #f1f3f5;
  text-transform: uppercase;
  font-weight: 700;
  letter-spacing: 0.5px;
  border-bottom: 2px solid #dee2e6;
}

/* Subtle row hovering */
tbody tr:hover {
  background-color: #f8f9fa !important;
  box-shadow: inset 4px 0 0 #007bff; /* Accent line on hover */
}

/* Unified Modal Styles */
.modal-backdrop {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    z-index: 2000;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(2px);
}

.modal-content-wrapper {
    background: white;
    padding: 25px;
    border-radius: 12px;
    max-width: 600px;
    width: 95%;
    max-height: 85vh;
    overflow-y: auto;
    position: relative;
}

/* Single Line Detail Row */
.detail-row {
    display: flex;
    align-items: baseline;
    padding: 6px 0;
    border-bottom: 1px solid #f0f0f0;
}

.detail-label {
    color: #666;
    font-size: 0.85rem;
    font-weight: 600;
    white-space: nowrap;
}

.detail-filler {
    flex-grow: 1;
    border-bottom: 1px dotted #ccc;
    margin: 0 8px;
}

.detail-value {
    color: #222;
    font-weight: 500;
    text-align: right;
}